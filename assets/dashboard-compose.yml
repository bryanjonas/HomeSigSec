services:
  homesigsec-nginx:
    image: nginx:alpine
    restart: unless-stopped
    ports:
      - "${HOMESIGSEC_BIND_LAN:-127.0.0.1}:8088:8088"
    volumes:
      - ./dashboard-nginx.conf:/etc/nginx/conf.d/default.conf:ro
      - ${HOMESIGSEC_WORKDIR:-./../output}/www:/www:ro
    depends_on:
      - homesigsec-api

  homesigsec-api:
    build:
      context: ./dashboard-api
    restart: unless-stopped
    environment:
      - HOMESIGSEC_WORKDIR=${HOMESIGSEC_WORKDIR:-/work/output}
    volumes:
      - ${HOMESIGSEC_WORKDIR:-./../output}:/work/output
